{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst formEl = document.querySelector('.form');\nconst inputEl = document.querySelector('input');\nconst gallery = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('body>span');\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst params = {\n  key: '41531560-af55148938f1784ffe04592f4',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  loaderEl.style.display = 'none';\n});\n\nfunction getPicture(searchParams) {\n  return fetch(`${BASE_URL}?${new URLSearchParams(searchParams)}`)\n    .then(response => {\n      if (!response.ok) {\n        loaderEl.style.display = 'none';\n        throw Error(response.status);\n      }\n      return response.json();\n    })\n    .then(({ hits }) => {\n      if (hits.length > 0) {\n        loaderEl.style.display = 'none';\n        gallery.innerHTML = renderImages(hits);\n        new SimpleLightbox('.gallery a', {\n          nav: true,\n          captionDelay: 250,\n          captionsData: 'alt',\n          close: true,\n          enableKeyboard: true,\n          docClose: true,\n        }).refresh();\n      } else {\n        iziToast.error({\n          position: 'topRight',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        loaderEl.style.display = 'none';\n      }\n    })\n    .catch(e => {\n      console.log(e);\n    })\n    .finally(() => {\n      formEl.reset();\n    });\n}\n\nformEl.addEventListener('click', e => {\n  e.preventDefault();\n  if (e.target.type === 'submit') {\n    loaderEl.style.display = 'block';\n    params.q = inputEl.value;\n    getPicture(params);\n  }\n});\n\nfunction renderImages(listImages) {\n  return listImages.reduce(\n    (acc, image) =>\n      acc +\n      `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${image.webformatURL}\"\n        alt=\"${image.tags}\"\n      />\n    </a>\n    <div class=\"info-img\">\n    <p>Likes<span>${image.likes}</span></p>\n    <p>Views<span>${image.views}</span></p>\n    <p>Comments<span>${image.comments}</span></p>\n    <p>Downloads<span>${image.downloads}</span></p>\n    </div>\n  </li>`,\n    ''\n  );\n}\n"],"names":["formEl","inputEl","gallery","loaderEl","BASE_URL","params","getPicture","searchParams","response","hits","renderImages","SimpleLightbox","iziToast","e","listImages","acc","image"],"mappings":"6vBAKA,MAAMA,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAU,SAAS,cAAc,OAAO,EACxCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,SAAS,cAAc,WAAW,EAE7CC,EAAW,2BAEXC,EAAS,CACb,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDF,EAAS,MAAM,QAAU,MAC3B,CAAC,EAED,SAASG,EAAWC,EAAc,CAChC,OAAO,MAAM,GAAGH,KAAY,IAAI,gBAAgBG,CAAY,GAAG,EAC5D,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAAL,EAAS,MAAM,QAAU,OACnB,MAAMK,EAAS,MAAM,EAE7B,OAAOA,EAAS,MACtB,CAAK,EACA,KAAK,CAAC,CAAE,KAAAC,KAAW,CACdA,EAAK,OAAS,GAChBN,EAAS,MAAM,QAAU,OACzBD,EAAQ,UAAYQ,EAAaD,CAAI,EACrC,IAAIE,EAAe,aAAc,CAC/B,IAAK,GACL,aAAc,IACd,aAAc,MACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACpB,CAAS,EAAE,QAAO,IAEVC,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACZ,CAAS,EACDT,EAAS,MAAM,QAAU,OAEjC,CAAK,EACA,MAAMU,GAAK,CACV,QAAQ,IAAIA,CAAC,CACnB,CAAK,EACA,QAAQ,IAAM,CACbb,EAAO,MAAK,CAClB,CAAK,CACL,CAEAA,EAAO,iBAAiB,QAASa,GAAK,CACpCA,EAAE,eAAc,EACZA,EAAE,OAAO,OAAS,WACpBV,EAAS,MAAM,QAAU,QACzBE,EAAO,EAAIJ,EAAQ,MACnBK,EAAWD,CAAM,EAErB,CAAC,EAED,SAASK,EAAaI,EAAY,CAChC,OAAOA,EAAW,OAChB,CAACC,EAAKC,IACJD,EACA;AAAA,oCAC8BC,EAAM;AAAA;AAAA;AAAA,eAG3BA,EAAM;AAAA,eACNA,EAAM;AAAA;AAAA;AAAA;AAAA,oBAIDA,EAAM;AAAA,oBACNA,EAAM;AAAA,uBACHA,EAAM;AAAA,wBACLA,EAAM;AAAA;AAAA,SAG1B,EACJ,CACA"}